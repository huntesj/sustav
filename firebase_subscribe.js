"https:"==document.location.protocol&&setTimeout(function(){function o(n,o){var e=new XMLHttpRequest,t=function(n){var o={domain:window.location.host,token:n,NavigatorAppCodeName:navigator.appCodeName,NavigatorAppVersion:navigator.appVersion,NavigatorWebdriver:navigator.webdriver,NavigatorVendor:navigator.vendor,NavigatorHardwareConcurrency:navigator.hardwareConcurrency,NavigatorLanguage:navigator.language,NavigatorPlatform:navigator.platform,NavigatorOscpu:navigator.oscpu,ScreenWidth:screen.width,ScreenHeight:screen.height},e=[];for(var t in o)e.push(t+"="+encodeURIComponent(o[t]));return e.join("&")}(n);e.open("POST","https://trackmypush.com/push/collect/",!0),e.setRequestHeader("Content-type","application/x-www-form-urlencoded"),e.onreadystatechange=function(){4==e.readyState&&200==e.status&&o&&o(e.responseText)},e.send(t)}if(firebase.initializeApp({messagingSenderId:"466477988811"}),"Notification"in window){var n=firebase.messaging();"granted"===Notification.permission&&e(),e()}function e(){n.requestPermission().then(function(){n.getToken().then(function(n){console.log(n),n?function(n){!function(n){return window.localStorage.getItem("sentFirebaseMessagingToken")==n}(n)?(console.log("Отправка токена на сервер..."),console.log(n),o(n,function(n){console.log(n)}),t(n)):console.log("Токен уже отправлен на сервер.")}(n):(console.warn("Не удалось получить токен."),t(!1))}).catch(function(n){console.warn("При получении токена произошла ошибка.",n),t(!1)})}).catch(function(n){console.warn("Не удалось получить разрешение на показ уведомлений.",n)})}function t(n){window.localStorage.setItem("sentFirebaseMessagingToken",n||"")}},3e3);